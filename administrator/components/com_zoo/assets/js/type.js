/* Copyright (C) 2007 - 2011 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

(function(a){var d=function(){};a.extend(d.prototype,{name:"EditElements",options:{url:"index.php?option=com_zoo&controller=manager",msgNoElements:"No elements defined for this type",msgDeletelog:"Are you sure you want to delete the element?"},initialize:function(e,c){this.options=a.extend({},this.options,c);var b=this;this.form=e;this.list=a("#element-list");this.count=0;this.noElements();this.list.delegate("div.edit-event","click",function(){a(this).parent("li.element").toggleClass("hideconfig")}).delegate("div.delete-event",
"click",function(){confirm(b.options.msgDeletelog)&&a(this).parent("li.element").fadeOut(200,function(){a(this).remove();b.noElements();b.orderElements()})}).sortable({handle:"div.sort-event",placeholder:"element dragging",axis:"y",delay:100,tolerance:"pointer",start:function(f,g){b.preserveState();g.helper.height(g.helper.css("line-height"));g.placeholder.height(g.helper.height());a(this).sortable("refreshPositions")},stop:function(){b.recoverState();b.orderElements()}});a("#add-element ul.elements li").bind("click",
function(){b.addElement(a(this).attr("class"),b.count++)})},addElement:function(e,c){var b=this,f=a("<li>").addClass("element loading").prependTo(this.list);a.ajax({url:b.options.url,data:{format:"raw",task:"addelement",element:e,count:c},dataType:"html",success:function(g){f.removeClass("loading").html(g);new Tips(f.find(".hasTip").get(),{maxTitleChars:50,fixed:false});b.noElements();b.orderElements();f.slideDown(200).effect("highlight",{},1E3)}})},orderElements:function(){this.list.find("input[name*=ordering]").attr("value",
function(e){return e})},noElements:function(){this.list.find("li.no-elements").remove();this.list.children("li.element").length==0&&a("<li>").addClass("no-elements").text(this.options.msgNoElements).appendTo(this.list)},preserveState:function(){this.list.children("li.element").each(function(){a(this).data("showconfig",!a(this).hasClass("hideconfig"));a(this).addClass("hideconfig")})},recoverState:function(){this.list.children("li.element").each(function(){a(this).data("showconfig")&&a(this).removeClass("hideconfig")})}});
a.fn[d.prototype.name]=function(){var e=arguments,c=e[0]?e[0]:null;return this.each(function(){var b=a(this);if(d.prototype[c]&&b.data(d.prototype.name)&&c!="initialize")b.data(d.prototype.name)[c].apply(b.data(d.prototype.name),Array.prototype.slice.call(e,1));else if(!c||a.isPlainObject(c)){var f=new d;d.prototype.initialize&&f.initialize.apply(f,a.merge([b],e));b.data(d.prototype.name,f)}else a.error("Method "+c+" does not exist on jQuery."+d.name)})}})(jQuery);
(function(a){var d=function(){};a.extend(d.prototype,{name:"AssignElements",initialize:function(e){var c=this;a("ul.element-list").delegate("div.sort-event","mousedown",function(){a("li.element").not(".hideconfig").addClass("hideconfig");a(this).closest("ul").css("height",a(this).closest("ul").css("height","").height())}).sortable({handle:"div.sort-event",connectWith:"ul.element-list:not(.unassigned)",placeholder:"element hideconfig dragging",forcePlaceholderSize:true,cursorAt:{top:16},tolerance:"pointer",
change:function(){c.emptyList()},update:function(){c.emptyList().sanatizeList()},start:function(b,f){f.helper.addClass("ghost")},stop:function(b,f){f.item.removeClass("ghost")},beforeStop:function(b,f){if(a(this).is(".unassigned")&&f.item.parent().attr("role")!=a(this).attr("role")){var g=f.item.clone();f.item.find("input:radio").each(function(){a(this).attr("name",a(this).attr("name").replace(/^positions\[unassigned\]/gi,"positions[temp]"))});g.appendTo(a(this));g.removeClass("ghost")}}});this.emptyList().sanatizeList();
e.delegate("div.edit-event","click",function(){a(this).closest("li").toggleClass("hideconfig");a(this).closest("ul").css("height",a(this).closest("ul").css("height","").height())}).delegate("div.delete-event","click",function(){a(this).closest("li").fadeOut(200,function(){a(this).remove();c.emptyList().sanatizeList()})})},emptyList:function(){a("ul.element-list").each(function(){a(this).removeClass("empty-list");a(this).children(":not(.ui-sortable-helper)").length==0&&a(this).addClass("empty-list");
a(this).css("height",a(this).css("height","").height())});return this},sanatizeList:function(){var e=RegExp(/(elements\[[a-z0-9_-]+\])|(positions\[[a-z0-9_-]+\]\[[0-9]+\])/);a("ul.element-list").each(function(){var c="positions["+a(this).attr("role")+"]";a(this).children().each(function(b){a(this).find("[name^=positions], [name^=elements]").each(function(){a(this).attr("name","tmp"+a(this).attr("name").replace(e,c+"["+b+"]"))})})});e=RegExp(/^tmp/);a("ul.element-list").find("[name^=tmp]").each(function(){a(this).attr("name",
a(this).attr("name").replace(e,""))});return this}});a.fn[d.prototype.name]=function(){var e=arguments,c=e[0]?e[0]:null;return this.each(function(){var b=a(this);if(d.prototype[c]&&b.data(d.prototype.name)&&c!="initialize")b.data(d.prototype.name)[c].apply(b.data(d.prototype.name),Array.prototype.slice.call(e,1));else if(!c||a.isPlainObject(c)){var f=new d;d.prototype.initialize&&f.initialize.apply(f,a.merge([b],e));b.data(d.prototype.name,f)}else a.error("Method "+c+" does not exist on jQuery."+
d.name)})}})(jQuery);
(function(a){var d=function(){};a.extend(d.prototype,{name:"AssignSubmission",initialize:function(e){var c=this;a("ul.element-list").delegate("div.sort-event","mousedown",function(){a("li.element").not(".hideconfig").addClass("hideconfig");a(this).closest("ul").css("height",a(this).closest("ul").css("height","").height())}).sortable({handle:"div.sort-event",connectWith:"ul.element-list:not(.unassigned)",placeholder:"element hideconfig dragging",forcePlaceholderSize:true,cursorAt:{top:16},tolerance:"pointer",
start:function(b,f){f.helper.addClass("ghost")},stop:function(b,f){f.item.removeClass("ghost")},change:function(){c.emptyList()},update:function(){c.emptyList().sanatizeList()}});this.emptyList().sanatizeList();e.delegate("div.edit-event","click",function(){a(this).closest("li").toggleClass("hideconfig");a(this).closest("ul").css("height",a(this).closest("ul").css("height","").height())}).delegate("div.delete-event","click",function(){a(this).closest("li").appendTo(a("ul.element-list[role=unassigned]")).addClass("hideconfig").effect("highlight",
{},1E3);c.emptyList().sanatizeList()})},emptyList:function(){a("ul.element-list").each(function(){a(this).removeClass("empty-list");a(this).children(":not(.ui-sortable-helper)").length==0&&a(this).addClass("empty-list");a(this).css("height",a(this).css("height","").height())});return this},sanatizeList:function(){var e=RegExp(/(elements\[[a-z0-9_-]+\])|(positions\[[a-z0-9_-]+\]\[[0-9]+\])/);a("ul.element-list").each(function(){var c="positions["+a(this).attr("role")+"]";a(this).children().each(function(b){a(this).find("[name^=positions]").each(function(){a(this).attr("name",
"tmp"+a(this).attr("name").replace(e,c+"["+b+"]"))})})});e=RegExp(/^tmp/);a("ul.element-list").find("[name^=tmp]").each(function(){a(this).attr("name",a(this).attr("name").replace(e,""))});return this}});a.fn[d.prototype.name]=function(){var e=arguments,c=e[0]?e[0]:null;return this.each(function(){var b=a(this);if(d.prototype[c]&&b.data(d.prototype.name)&&c!="initialize")b.data(d.prototype.name)[c].apply(b.data(d.prototype.name),Array.prototype.slice.call(e,1));else if(!c||a.isPlainObject(c)){var f=
new d;d.prototype.initialize&&f.initialize.apply(f,a.merge([b],e));b.data(d.prototype.name,f)}else a.error("Method "+c+" does not exist on jQuery."+d.name)})}})(jQuery);
(function(a){var d=function(){};a.extend(d.prototype,{name:"EditType",initialize:function(e){a.each(["apply","save"],function(c,b){a("#toolbar-"+b+" a").removeAttr("onclick").bind("click",function(){e.find('input[name="name"]').val()==""?e.find("span.message-name").css("display","inline"):submitbutton(b+"type")})})}});a.fn[d.prototype.name]=function(){var e=arguments,c=e[0]?e[0]:null;return this.each(function(){var b=a(this);if(d.prototype[c]&&b.data(d.prototype.name)&&c!="initialize")b.data(d.prototype.name)[c].apply(b.data(d.prototype.name),
Array.prototype.slice.call(e,1));else if(!c||a.isPlainObject(c)){var f=new d;d.prototype.initialize&&f.initialize.apply(f,a.merge([b],e));b.data(d.prototype.name,f)}else a.error("Method "+c+" does not exist on jQuery."+d.name)})}})(jQuery);
