/* Copyright (C) 2007 - 2011 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

(function(a){var f=function(){};a.extend(f.prototype,{name:"Comment",options:{url:"index.php?option=com_zoo&controller=comment",id:"edit-comment-editor"},initialize:function(b,d){this.options=a.extend({},this.options,d);var e=this;this.form=b;b.delegate("tr.comment-row .actions-links .edit, tr.comment-row .actions-links .reply","click",function(c){c.stopPropagation();c=a(this).attr("class");e.modifyEvent(a(this).closest("tr.comment-row"),c)});b.delegate("tr.comment-row .actions-links span","click",
function(c){c.stopPropagation();switch(a(this).attr("class")){case "no-spam":c="approve";break;case "delete":c="remove";break;default:c=a(this).attr("class")}e.stateEvent(a(this).closest("tr.comment-row"),c)})},modifyEvent:function(b,d){$this=this;a.ajax({url:this.options.url,data:{task:d,format:"raw",cid:b.find("input[name^=cid[]").val()},success:function(e){$this.removeEditor();$this.insertEditor(b,e);d=="edit"&&b.hide();$this.form.unbind("save").unbind("cancel").bind("save",function(c,g){$this.removeEditor();
d=="edit"?b.replaceWith(g):a(g).insertAfter(b);$this.stripe()}).bind("cancel",function(){$this.removeEditor()})}})},stateEvent:function(b,d){a('<input type="hidden" name="cid">').val(b.find("input[name^=cid[]").val()).appendTo(this.form);this.form.find("input[name=task]").val(d);this.form.submit()},insertEditor:function(b,d){var e=b.after(d).next();e.find(".actions .save").bind("click",function(c){c.stopPropagation();var g={};a.each($this.form.serializeArray(),function(h,i){g[i.name]=i.value});a.ajax({type:"POST",
url:$this.options.url,data:a.extend(g,{task:"save",format:"raw"}),success:function(h){$this.form.triggerHandler("save",h)}})});e.find(".actions .cancel").bind("click",function(c){c.stopPropagation();$this.form.triggerHandler("cancel")});e.find(".content textarea").focus()},removeEditor:function(){a("#"+this.options.id,this.form).prev("tr").show();a("#"+this.options.id,this.form).remove()},stripe:function(){a("table.stripe tbody tr").removeClass("odd even").each(function(){a(this).addClass(a(this).is("tr:odd")?
"odd":"even")})}});a.fn[f.prototype.name]=function(){var b=arguments,d=b[0]?b[0]:null;return this.each(function(){var e=a(this);if(f.prototype[d]&&e.data(f.prototype.name)&&d!="initialize")e.data(f.prototype.name)[d].apply(e.data(f.prototype.name),Array.prototype.slice.call(b,1));else if(!d||a.isPlainObject(d)){var c=new f;f.prototype.initialize&&c.initialize.apply(c,a.merge([e],b));e.data(f.prototype.name,c)}else a.error("Method "+d+" does not exist on jQuery."+f.name)})}})(jQuery);
